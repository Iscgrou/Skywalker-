# SHERLOCK v12.0 - ุชุญูู ุฌุงูุน ูุงฺฉุชูุฑูุง ู ูุฏุฑุช ููฺฉุงุฑุงู ูุฑูุด

## ๐ ุฎูุงุตู ุงุฌุฑุง

ุชุญูู ุนูู ุณุณุชู MarFaNet ูุดุงู ูโุฏูุฏ ฺฉู **ูุฏุฑุช ูุงฺฉุชูุฑูุง ู ููฺฉุงุฑุงู ูุฑูุด** ุฏุงุฑุง ูุนูุงุฑ ูพุงู ูู ุงูุง ูุงุฒููุฏ ุจูุจูุฏูุง ุนููฺฉุฑุฏ ู ุงุชุตุงู ฺฉุงูู ุงุณุช.

## ๐ ุงูุชูโูุง ฺฉูุฏ

### โ ููุงุท ููุช ููุฌูุฏ
- **ูุนูุงุฑ FIFO**: ุงูฺฏูุฑุชู ุชุฎุตุต ูพุฑุฏุงุฎุช ุจู ูุงฺฉุชูุฑูุง (ูุฏูโุชุฑู ุงุจุชุฏุง) ุตุญุญ ูพุงุฏูโุณุงุฒ ุดุฏู
- **ูพุงู ุฏุงุฏู ูู**: ุฌุฏูู `salesPartners` ุจุง ููุฏูุง ฺฉุงูู (ูุงูุ ุชูููุ ุงููุ ูุฑุฎ ฺฉูุณูู)
- **ุฑุงุจุท ฺฉุงุฑุจุฑ ุขูุงุฏู**: ุตูุญู `sales-partners.tsx` ุจุง UI ฺฉุงูู ู ุณู ุชุจ ุงุตู
- **API ุขูุงุฏู**: endpoint ูุง `/api/sales-partners` ููุฌูุฏ ุงุณุช

### โ ูุดฺฉูุงุช ุดูุงุณุงโุดุฏู

#### 1. **ุงุชุตุงู ูุงูุต ููุงูุฏฺฏุงู ุจู ููฺฉุงุฑุงู ูุฑูุด**
```typescript
// ุฏุฑ representatives.tsx - ููุฏ ููุฌูุฏ ุงูุง ุงุณุชูุงุฏู ูุดุฏู
salesPartnerId: z.number().optional(),
```
- ููุฏ `salesPartnerId` ุฏุฑ ูุฑู ุงุฌุงุฏ ููุงูุฏู ููุฌูุฏ ุงุณุช ุงูุง ุฏุฑ UI ููุงุด ุฏุงุฏู ููโุดูุฏ
- ุฏุฑ ุฌุฏูู ููุงูุฏฺฏุงูุ ุณุชูู ููฺฉุงุฑ ูุฑูุด ูุฑุจูุทู ุบุงุจ ุงุณุช

#### 2. **ุฎุทุงูุง TypeScript ุฏุฑ ุตูุญู ููฺฉุงุฑุงู ูุฑูุด**
```
Error on line 416: Argument of type 'boolean | null' is not assignable
Error on line 439: Type 'undefined' is not assignable to type 'string'
Error on line 444: Type 'null' is not assignable to type 'string'
Error on line 517: arithmetic operation error
```

#### 3. **ุนุฏู ุงุชุตุงู ฺฉุงูู API**
- API endpoint `/api/sales-partners` ููุฌูุฏ ุงูุง ุนููฺฉุฑุฏ ฺฉุงูู ูุฏุงุฑุฏ
- endpoint ุขูุงุฑฺฏุฑ `/api/sales-partners/statistics` ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ ุฏุงุฑุฏ
- CRUD operations ุจุฑุง ููฺฉุงุฑุงู ูุฑูุด ูุงูุต ุงุณุช

#### 4. **ูุดฺฉูุงุช ููุงุด ูุงฺฉุชูุฑูุง**
- ููุชุฑูฺฏ ูพุดุฑูุชู ุฏุฑ `invoices.tsx` ฺฉุงูู ูุดุฏู
- export ฺฏุฒุงุฑุดุงุช ูุงฺฉุชูุฑูุง ุบุงุจ ุงุณุช
- pagination ูพุดุฑูุชู ูุงุฒ ุจู ุจูุจูุฏ ุฏุงุฑุฏ

## ๐ฏ ุทุฑุญ ุงูุฏุงู ูพุดููุงุฏ (ูุงุฒ ุงูู - ููุฑ)

### 1. ุฑูุน ุฎุทุงูุง TypeScript
```typescript
// sales-partners.tsx - ุงุตูุงุญ ููุน ุฏุงุฏูโูุง
isActive: boolean | null โ isActive: boolean
phone: string | undefined โ phone: string
```

### 2. ุชฺฉูู ุงุชุตุงู ููุงูุฏฺฏุงู-ููฺฉุงุฑุงู ูุฑูุด
- ุงุถุงูู ฺฉุฑุฏู dropdown ุงูุชุฎุงุจ ููฺฉุงุฑ ูุฑูุด ุฏุฑ ูุฑู ุงุฌุงุฏ ููุงูุฏู
- ููุงุด ูุงู ููฺฉุงุฑ ูุฑูุด ุฏุฑ ุฌุฏูู ููุงูุฏฺฏุงู
- ุงุฌุงุฏ ฺฏุฒุงุฑุดโฺฏุฑ ุจุฑ ุงุณุงุณ ููฺฉุงุฑ ูุฑูุด

### 3. ุชฺฉูู API ูุง ููฺฉุงุฑุงู ูุฑูุด
```typescript
// ูพุงุฏูโุณุงุฒ endpoints ูุทููุจ:
GET    /api/sales-partners          // โ ููุฌูุฏ
POST   /api/sales-partners          // โ ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ
PUT    /api/sales-partners/:id      // โ ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ
DELETE /api/sales-partners/:id      // โ ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ
GET    /api/sales-partners/statistics // โ ูุงุฒ ุจู ูพุงุฏูโุณุงุฒ
```

### 4. ุจูุจูุฏ ูุฏุฑุช ูุงฺฉุชูุฑูุง
- ุงุถุงูู ฺฉุฑุฏู export ุจู Excel/PDF
- ููุชุฑูฺฏ ูพุดุฑูุชู ุจุฑ ุงุณุงุณ ููฺฉุงุฑ ูุฑูุด
- ฺฏุฒุงุฑุดโฺฏุฑ ุนููฺฉุฑุฏ ุจุฑ ุงุณุงุณ ุฏูุฑู ุฒูุงู

## ๐ง ูุนูุงุฑ ูู ูุทููุจ

### Database Relations
```sql
-- ุงุชุตุงู ฺฉุงูู ููุงูุฏฺฏุงู ุจู ููฺฉุงุฑุงู ูุฑูุด
representatives.salesPartnerId โ salesPartners.id

-- ูุญุงุณุจู ฺฉูุณูู ุฎูุฏฺฉุงุฑ
SUM(invoices.amount * salesPartners.commissionRate / 100) 
WHERE invoices.representativeId IN (
  SELECT id FROM representatives WHERE salesPartnerId = ?
)
```

### UI Components Structure
```
SalesPartnersPage
โโโ Statistics Cards (4 ฺฉุงุฑุช ุงุตู)
โโโ Filters & Search
โโโ Data Table
โ   โโโ Partner Info
โ   โโโ Representative Count
โ   โโโ Total Sales
โ   โโโ Total Commission
โ   โโโ Actions (Edit/Delete/View)
โโโ Create/Edit Modal
โโโ Details Modal with Representatives List
```

## ๐ ุงูููุชโุจูุฏ

### ุงูููุช ุจุงูุง (ููุชู ุฌุงุฑ)
1. ุฑูุน ุฎุทุงูุง TypeScript
2. ุชฺฉูู CRUD operations ุจุฑุง ููฺฉุงุฑุงู ูุฑูุด
3. ุงุถุงูู ฺฉุฑุฏู dropdown ููฺฉุงุฑ ูุฑูุด ุฏุฑ ูุฑู ููุงูุฏฺฏุงู

### ุงูููุช ูุชูุณุท (ููุชู ุขูุฏู)
1. ุชฺฉูู ุตูุญู ุขูุงุฑฺฏุฑ ููฺฉุงุฑุงู ูุฑูุด
2. ุงุถุงูู ฺฉุฑุฏู ฺฏุฒุงุฑุดโฺฏุฑ ูพุดุฑูุชู
3. export ูุงฺฉุชูุฑูุง

### ุงูููุช ูพุงู (ุขูุฏู)
1. dashboard ุงุฎุชุตุงุต ุจุฑุง ูุฑ ููฺฉุงุฑ ูุฑูุด
2. ุงุนูุงูโูุง ููุดููุฏ ุจุฑุง ุนููฺฉุฑุฏ
3. integration ุจุง ุณุณุชูโูุง CRM ุฎุงุฑุฌ

## ๐๏ธ ูุชุฌูโฺฏุฑ

ุณุณุชู MarFaNet ุฏุงุฑุง **ุจูุงู ูุญฺฉู** ุฏุฑ ูุฏุฑุช ูุงฺฉุชูุฑูุง ู ููฺฉุงุฑุงู ูุฑูุด ุงุณุชุ ุงูุง ุจุฑุง ุนููฺฉุฑุฏ ฺฉุงูู ูุงุฒ ุจู **ุชฺฉูู ุงุชุตุงูุงุช** ู **ุฑูุน ูุดฺฉูุงุช ูู** ุฏุงุฑุฏ. ุจุง ูพุงุฏูโุณุงุฒ ุทุฑุญ ุงูุฏุงู ูููุ ุณุณุชู ุขูุงุฏู ุงุฑุงุฆู ุฎุฏูุงุช ฺฉุงูู ุฎูุงูุฏ ุจูุฏ.

---
*ฺฏุฒุงุฑุด ุชูู ุดุฏู ุชูุณุท SHERLOCK v12.0 Analysis Engine*
*ุชุงุฑุฎ: น ุขฺฏูุณุช ฒฐฒต*